<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verify Certificate</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Montserrat:wght@400;700&display=swap');
        body { font-family: 'Montserrat', sans-serif; background: #eef2f3; text-align: center; padding: 20px; }
        .cert-card { width: 100%; max-width: 600px; background: white; padding: 10px; margin: auto; border: 1px solid #ccc; }
        .cert-border { border: 6px double #c5a059; padding: 20px; }
        .student-photo { width: 90px; height: 110px; border: 2px solid #c5a059; object-fit: cover; }
    </style>
</head>
<body>
    <h2 style="color:green;">âœ” VERIFIED RECORD</h2>
    <div class="cert-card">
        <div class="cert-border">
            <img id="v-photo" class="student-photo" src="">
            <h2 style="font-family:'Cinzel'; color:#1a2a6c;">KAUSHALJI INSTITUTE</h2>
            <hr>
            <p>Student Name: <b id="v-name"></b></p>
            <p>Roll No: <b id="v-roll"></b></p>
            <p>Course: <b id="v-course"></b></p>
            <p>Grade: <b id="v-grade"></b></p>
            <p id="v-date" style="font-size:12px;"></p>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
        import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBwTuTRocI06yThCDLLntez_GVb8hk-HOo",
            authDomain: "kaushalji-o-level.firebaseapp.com",
            databaseURL: "https://kaushalji-o-level-default-rtdb.firebaseio.com",
            projectId: "kaushalji-o-level",
            appId: "1:282134334842:web:02ae55c4d25a2c8e7a1ac3"
        };

        const app = initializeApp(firebaseConfig);
        const dbRef = ref(getDatabase(app));
        const id = new URLSearchParams(window.location.search).get('id');

        if(id) {
            get(child(dbRef, `certificates/${id}`)).then((snap) => {
                if(snap.exists()) {
                    const data = snap.val();
                    document.getElementById('v-name').innerText = data.name;
                    document.getElementById('v-roll').innerText = data.roll;
                    document.getElementById('v-course').innerText = data.course;
                    document.getElementById('v-grade').innerText = data.grade;
                    document.getElementById('v-date').innerText = "Verified on: " + data.date;
                    document.getElementById('v-photo').src = data.photo;
                }
            });
        }
    </script>
</body>
</html>
